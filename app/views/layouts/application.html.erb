<!DOCTYPE html>
<html>
    <head>
        <title>Chokichoki</title>
        <%= csrf_meta_tags %>
        <%= csp_meta_tag %>
        
        <script src='https://js.pay.jp/' type='text/javascript'></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.js"></script>
        <%= Gon::Base.render_data %>
        <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
        <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
        <script src="//maps.google.com/maps/api/js?v=3.23&key= <%= ENV['GOOGLE_MAP_KEY'] %> "></script>
        <script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>
        <script src='//cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js' type='text/javascript'></script> 
    </head>
    <body>
        <% if flash[:notice].present? %>
            <div id="flash">
                <p><%= flash[:notice] %> </p>
            </div>
        <% end %>
        <% if flash[:notice_red].present? %>
            <div id="flash_red">
                <p><%= flash[:notice_red] %> </p>
            </div>
        <% end %>


<!--<h1>google map</h1>
<div style='width: 800px;'>
  <div id="map" style='width: 800px; height: 400px;'></div>
</div>

<script type="text/javascript">
  handler = Gmaps.build('Google');
  handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
    markers = handler.addMarkers([
      {
        "lat": "35", //緯度
        "lng": "135", //経度
        "infowindow": "テックキャンプ渋谷オフィス"
      }
    ]);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
    handler.getMap().setZoom(16);
  });
</script>-->
    　　
        <header>
            <img src="<%= asset_path "new_logo.png" %>" class="log"><!--cho.png-->
            <%= link_to root_path do %>
                <div class="link_box"></div> <!--本来ならここにロゴをセットするがロゴ画像の背景を削除できなくてロゴ周辺がリンクになってしまうため工夫するしかなかった-->
            <% end %>
            <%= link_to "サロンの方はこちら", hairdresser_top_path, class: "salon"%>
            <div class="search_form_header">
                <%= form_with(url: search_data_path, method: :post, local: true, class: "welcome") do |f| %>
                    <%= f.text_field :search_keyword, placeholder: "美容師名、メニュー名など", class: "form-control search_top" %>
                    <button type="submit" class="btn btn-primary search_icon_btn"> 
                        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                    </button> 
                <% end %>
                <% if @current_user %>
                    <div class="welcome">
                        <p class="">ようこそ、<%= @current_user.name %>さん</p>
                        <p class="">現在のポイントは、<%= @current_user.point %>pt</p>
                        <p><%= link_to "ログアウト", user_logout_path, method: :post %></p>
                    </div>
                <% end %>
                <% if @current_hairdresser %>
                    <div class="welcome2">
                        <p class="">ようこそ、<%= @current_hairdresser.name %>さん</p>
                        <p><%= link_to "ログアウト", hairdresser_logout_path, method: :post %></p>
                    </div>
                <% end %>
            </div>

            <% if @current_user %>
                <div id = "user_header">
                    <li class="tag tag_left"><%= link_to "マイページ", user_path(@current_user.id)%></li>
                    <li class="tag"><%= link_to "美容師一覧", hairdressers_path  %></li>
                    <li class="tag"><%= link_to "予約", users_reservations_path %></li>
                    <li class="tag"><%= link_to "チャット", user_chat_path %></li>
                    <li class="tag"><%= link_to "クレジットカード", new_user_card_path, class: "decoration_none" %></li>
                </div>
            <% elsif @current_hairdresser %>
                <ul id = "hairdresser_header">
                    <li class="tag tag_left"><%= link_to "マイページ", hairdresser_path(@current_hairdresser.id)%></li>
                    <li class="tag"><%= link_to "メニュー作成", new_menu_path%></li>
                    <li class="tag"><%= link_to "メニュー", menus_path %></li>
                    <% if @notice_reservations_number != 0 %>
                        <li class="tag"><span class="notice_number"><%= @notice_reservations_number %></span><%= link_to "予約", hairdressers_reservations_path %></li>
                    <% else %>
                        <li class="tag"><%= link_to "予約", hairdressers_reservations_path %></li>
                    <% end %>
                    <% if @cancel_number != 0 %>
                        <li class="tag"><span class="notice_cancel_number"><%= @cancel_number %></span><%= link_to "キャンセル", hairdressers_cancel_index_path, class: "cancel_link" %></li>
                    <% else %>
                        <li class="tag"><%= link_to "キャンセル", hairdressers_cancel_index_path, class: "cancel_link" %></li>
                    <% end %>
                    <li class="tag"><%= link_to "チャット", hairdresser_chat_path %></li>
                    <li class="tag"><%= link_to "ヘアスタイル", edit_style_image_path(@current_hairdresser.id) %></li>
                </ul>
            <% elsif @current_admin %>
                <ul id = "admin_header">
                    <li class="tag tag_left"><%= link_to "会員", admins_user_index_path%></li>
                    <li class="tag"><%= link_to "美容師", admins_hairdresser_index_path %></li>
                    <li class="tag"><%= link_to "承認待ち", admins_hairdresser_judge_index_path%></li>
                    <li class="tag"><%= link_to "チャート", admins_user_chart_path%></li>
                    <li class="tag"><%= link_to "ログアウト", admins_logout_path, method: :post %></li>
                </ul>
            <!-- ログインしてない時 -->
            <% elsif @user_page == "user"%>
                <ul id = "none_login_user">
                    <li class="tag tag_left scroll-btn" href="#top_hairdresser_slider">人気美容師</li>
                    <li class="tag scroll-btn" href="#FAQ">FAQ</li>
                    <li class="tag"><%= link_to "美容師一覧", hairdressers_path %></li>
                    <li class="tag login">ログイン</li>
                    <li class="tag sign_up">新規会員登録</li>
                    <div class="answer slide_down sign_in_block_user">
                        <p id="login_user" class="cursor">会員ログイン</p>
                        <p id="login_hairdresser" class="cursor ">美容師ログイン</p>
                    </div>
                    <div class="answer2 slide_down sign_up_block_user">
                        <p id="new_user" class="cursor ">会員登録</p>
                        <p id="new_hairdresser" class="cursor ">美容師登録</p>
                    </div>
                </ul>
            <% elsif  @hairdresser_page == "hairdresser" %>
                <ul id = "none_login_hairdresser">
                    <li class="tag tag_left scroll-btn" href="#top_hairdresser_slider">ご利用者さまの声</li>
                    <li class="tag scroll-btn" href="#FAQ">FAQ</li>
                    <li class="tag"><%= link_to "美容師一覧", hairdressers_path %></li>
                    <li class="tag login">ログイン</li>
                    <li class="tag sign_up">新規会員登録</li>
                    <div class="answer slide_down sign_in_block_hairdresser">
                        <p id="login_user" class="cursor">会員ログイン</p>
                        <p id="login_hairdresser" class="cursor ">美容師ログイン</p>
                    </div>
                    <div class="answer2 slide_down sign_up_block_hairdresser">
                        <p id="new_user" class="cursor ">会員登録</p>
                        <p id="new_hairdresser" class="cursor ">美容師登録</p>
                    </div>
                </ul>
            <% else %>
                <ul id = "none_login">
                    <li class="tag"><%= link_to "美容師一覧", hairdressers_path %></li>
                    <li class="tag login">ログイン</li>
                    <li class="tag sign_up">新規会員登録</li>
                    <div class="answer slide_down sign_in_block_hairdresser none_login">
                        <p id="login_user" class="cursor">会員ログイン</p>
                        <p id="login_hairdresser" class="cursor ">美容師ログイン</p>
                    </div>
                    <div class="answer2 slide_down sign_up_block_hairdresser none_new">
                        <p id="new_user" class="cursor ">会員登録</p>
                        <p id="new_hairdresser" class="cursor ">美容師登録</p>
                    </div>
                </ul>
            <% end %>
        </header>

        <main id="yield">
            <%= yield%>
        </main>
    
        <footer id="footer">
            <h3>ruby on rails で作成しました<%= link_to "adminへ",  admins_login_form_path %></h3>
        </footer>
        
        
        <!-- ここからはモーダル アクションを起こさない限りdisplayはnone -->
        <!-- 会員登録画面モーダル -->
        <div>
        </div>
        <div id="user_sign_up" class="sign_up_in">
            <div id="user_register">
                <span class="glyphicon glyphicon-remove cursor" style="margin-left: 440px; -size: 25px; margin-top: 10px;"></span>
                <h1  style="margin-top: -20px;">会員登録</h1>
                <div class="total_error error"></div>
                <%= form_with(model: @user_new, url: users_path, method: :post, class: "user_form") do |f|%>
                    <p>ユーザー名<span class="must">必須</span></p>
                    <p class="user_name_error error"></p>
                    <%= f.text_field :name, class: "form-control name for_user" %>
                    <p>メールアドレス<span class="must">必須</span></p>
                    <p class="user_email_error error"></p>
                    <%= f.email_field :email, class: "form-control email for_user" %>
                    <p>電話番号<span class="must">必須</span></p>
                    <p class="user_phone_error error"></p>
                    <%= f.text_field :phone_number, class: "form-control phone_number for_user" %>
                    <p>パスワード<span class="must">必須</span></p>
                    <p class="user_password_error error"></p>
                    <%= f.password_field :password, class: "form-control password for_user" %>
                    <p>パスワード確認<span class="must">必須</span></p>
                    <%= f.password_field :password_confirmation, class: "form-control password for_user" %>
                    <p>性別<span class="must">必須</span></p>
                    <p class="user_sex_error error"></p>
                    <span>男性</span>
                    <%= f.radio_button :sex, :男性, id: "sex_man"%>
                    <span>女性</span>
                    <%= f.radio_button :sex, :女性, id: "sex_woman"%>
                    <div>
                        <%= f.submit "登録", id: "user_btn", class: "btn btn-success" %>
                    </div>
                <% end %>
            </div>
        </div>
        
        <!-- 美容師登録画面モーダル -->
        <div id="hairdresser_sign_up" class="sign_up_in">
            <div id="hairdresser_register">
                <span class="glyphicon glyphicon-remove cursor" style="margin-left: 950px; -size: 25px; margin-top: 10px;"></span>
                <h1 style="margin-top: -20px;">美容師登録</h1>
                <div class="total_error error">
                </div>
                <%= form_with(model: @hairdresser_new, method: :post, class: "hairdresser_form", id: "hairdresser_register_form", style: "margin: 0 auto; width: 800px;") do |f|%>
                    <div style="width: 700px; margin: 0 auto;">
                        <div class="display_inline">
                            <p style="padding-right: 160px">ユーザー名<span class="must">必須</span></p>
                            <p class="hairdresser_name_error error" style="padding-right: 55px"></p>
                            <%= f.text_field :name, class: "form-control name for_hairdresser"%>
                        </div>
                        <div class="display_inline">
                            <p style="padding-right: 140px">メールアドレス<span class="must">必須</span></p>
                            <p class="hairdresser_email_error error"></p>
                            <p class="hairdresser_email_error2 error" style="width: 280px"></p>
                            <%= f.email_field :email, class: "form-control email for_hairdresser" %>
                        </div>
                        <div class="display_inline2">
                            <p style="padding-right: 180px">店舗名<span class="must">必須</span></p>
                            <p class="hairdresser_shop_name_error error" style="padding-right: 90px"></p>
                            <%= f.text_field :shop_name, class: "form-control shop_name for_hairdresser" %>
                        </div>
                    </div>
                    <div>
                        <div class="display_inline">
                            <p style="padding-right: 55px">店舗郵便番号(ハイフンなし)<span class="must">必須</span></p>
                            <p class="hairdresser_post_number_error error" style="padding-right: 50px"></p>
                            <%= f.text_field :post_number, class: "form-control post_number for_hairdresser"  %>
                        </div>
                        <div class="display_inline">
                            <p style="padding-right: 170px">店舗住所<span class="must">必須</span></p>
                            <p class="hairdresser_address_error error" style="padding-right: 107px"></p>
                            <%= f.text_field :address, class: "form-control address hairdresser_shop_address for_hairdresser" %>
                        </div>
                    </div>
                    <div>
                        <div class="display_inline">
                            <p style="padding-right: 160px">パスワード<span class="must">必須</span></p>
                            <p class="hairdresser_password_error error" style="padding-right: 96px"></p>
                            <%= f.password_field :password, class: "form-control password for_hairdresser" %>
                        </div>
                        <div class="display_inline">
                            <p style="padding-right: 130px">パスワード確認<span class="must">必須</span></p>
                            <%= f.password_field :password_confirmation, class: "form-control password for_hairdresser" %>
                        </div>
                        <div>
                            <p>自己紹介文</p>
                            <%= f.text_area :introduction, class: "form-control", style: "width: 80%; height: 80px; margin: 0 auto;"%>
                        </div>
                    </div>
                    <div style="width: 900px; margin: 0 auto;">
                        <div class="display_inline3">
                            <p>宣材写真</p>
                            <p>クリックして写真を追加してください</p>
                            <label class= "hairdresser_label" style="width: 150px; height: 150px;">
                                <%= f.attachment_field :hairdresser_image, id: "hairdresser_img", class: "hidden" %>
                                <img src="<%= asset_path "no_image.png" %>" id="prev_img" style= "width: 150px; height: 150px; border-radius: 20px;">
                            </label>
                            <p class="img_delete cursor">削除</p>
                            <div class="img_save" style="display: none;"></div>
                        </div>
                        <div class="display_inline3">
                            <p>美容師免許証<span class="must">必須</span></p>
                            <p>クリックして写真を追加してください</p>
                            <p class="img_error error"></p> 
                            <label class= "confirm_label" style="width: 150px; height: 150px;">
                                <%= f.attachment_field :confirm_image, id: "confirm_img", class: "hidden" %>
                                <img src="<%= asset_path "no_image.png" %>" id="prev_img2" style= "width: 150px; height: 150px; border-radius: 20px;">
                            </label>
                            <p class="img_delete2 cursor">削除</p>
                            <div class="img_save2" style="display: none;"></div>
                        </div>
                    </div>
                    <div>
                        <p>性別<span class="must">必須</span></p>
                        <p class="hairdresser_sex_error error"></p>
                        <span>男性</span>
                        <%= f.radio_button :sex, :男性, id: "hairdresser_sex_man"%>
                        <span>女性</span>
                        <%= f.radio_button :sex, :女性, id: "hairdresser_sex_woman"%>
                    </div>
                        <%= f.submit "登録", id: "hairdresser_btn", class: "btn btn-success"%>
                <% end %>
            </div>
        </div>
        
        <!-- 会員ログインモーダル -->
        <div id="user_sign_in" class="sign_up_in">
            <div class="login_page">
                <span class="glyphicon glyphicon-remove cursor" style="margin-left: 410px;"></span>
                <h2>会員ログイン</h2>
                <p class="user_login_error error"></p>
                <div>
                    <%= form_with(url: user_login_path, method: :post, id: "user_login_form") do |f| %>
                        <p>メールアドレス</p>
                        <%= f.text_field :email, class: "form-control login_form" %>
                        <p>パスワード</p>
                        <%= f.password_field :password, class: "form-control login_form" %>
                        <%= f.submit "ログイン", class: "btn btn-success login_btn" %>
                    <% end %>
                </div>
            </div>
        </div>
        
         <!-- 美容師ログインモーダル -->
        <div id="hairdresser_sign_in" class="sign_up_in">
            <div class="login_page">
                <span class="glyphicon glyphicon-remove cursor" style="margin-left: 410px;"></span>
                <h2>美容師ログイン</h2>
                <p class="hairdresser_login_error error"></p>
                <div>
                    <%= form_with(url: hairdresser_login_path, method: :post) do |f| %>
                        <p>メールアドレス</p>
                        <%= f.text_field :email, class: "form-control login_form"  %>
                        <p>パスワード</p>
                        <%= f.password_field :password, class: "form-control login_form"  %>
                        <%= f.submit "ログイン", class: "btn btn-success login_btn" %>
                    <% end %>
                </div>
            </div>
        </div>

    </body>
</html>
